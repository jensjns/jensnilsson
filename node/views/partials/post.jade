article.panel-white.mb16.relative
    header.mb4.c-dark-gray
        if (post.heroImage)
            img(src="#{post.heroImage.sizes.wide}" class="unit unit-1of1 mb3")
        h1.serif.bold.center-text.ph2
            a.c-dark-gray(href="#{post.permalink}") #{post.title}
        p.center-text.sans-serif.c-light-gray #{post.author.displayName} on #[time(datetime=post.postDate) !{moment(post.postDate).format('MMMM Do, YYYY')}]
        a.author(href="#{post.author.url}")
            div
                img.round(src="#{post.author.profileImage.sizes.thumbnail}")
    div.mb4
        each contentBlock in post.contentBlocks
            div.mb3(class="#{contentBlock.blockType}")
                if (contentBlock.blockType == 'markdown')
                    div.ph2
                        div.markdown-body !{marked(contentBlock[contentBlock.blockType])}
                if (contentBlock.blockType == 'code')
                    div.pv4.ph2.panel-code-bg !{marked(contentBlock[contentBlock.blockType])}
                if (contentBlock.blockType == 'gallery')
                    div.swiper-container.unit-1of1
                        div.swiper-wrapper
                            each image in contentBlock[contentBlock.blockType]
                                div.swiper-slide
                                    //img.unit-1of1(src="#{image.sizes['1080.16/9']}")
                                    img.unit-1of1.swiper-lazy(data-src="#{image.sizes['1080.16/9']}")
                                    div.swiper-lazy-preloader
                        div.swiper-pagination.swiper-pagination-white
                        div.swiper-button-next.swiper-button-white
                        div.swiper-button-prev.swiper-button-white
                if (contentBlock.blockType == 'image')
                    div.unit-1of1
                        img(src="#{contentBlock[contentBlock.blockType].sizes['1080']}" class="unit-1of1")
                if (contentBlock.blockType == 'geojson')
                    div.unit-1of1
                        div.mapbox-map(data-geojson="#{contentBlock[contentBlock.blockType]}" data-access-token="#{data.siteSettings.mapboxAccessToken}" data-map-id="#{data.siteSettings.mapboxMapId}")
    footer.pb4
        div.ph2
            div.content-width.mha
                if (single)
                    include disqus
                else
                    div.center-text
                        a.serif.c-dark-gray.no-dec.bold(href="#{post.permalink}#disqus_thread") Comment on this article
